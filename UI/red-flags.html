<!DOCTYPE html>
<html>
<head>
	<title>My Red Flags | iReporter</title>

	<link rel="stylesheet" type="text/css" href="assets/css/ireporter.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/navbar2.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/user.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/records.css" />

	<script src="assets/js/ireporter.js"></script>
	<script src="assets/js/api.js"></script>
	<script src="assets/js/app.js"></script>
	<script src="assets/js/incidents.js"></script>
	<script>
	app.setAuthRequired(true);
	app.ready((http, dom) => {
      dom.selector('.auth-logout').click(app.logout);

      deleteIncident = (index) => {
	    const modal = new QuestionModal('delete-modal');
	    modal.onYes(() => {
	      modal.hide();

          const id = incidentTable.dataAt(index).id;
          http.api(`red-flags/${id}`).delete((data) => {
            incidentTable.remove(index);

            app.toast.success(data[0].message);
          }, (error) => {
          	console.log(error);
          });
	    });
	    modal.show();
      };

	  initTable('red-flag');

	  loadIncidents(http, 'red-flag');
	});
	app.start();
	</script>
</head>
<body>
	<div class="red-bg">
		<div class="container">
			<div id="navbar">
				<a href="dashboard.html" class="sitename">iReporter</a>
				<div class="navbar-menu">
					<ul>
						<li><a href="red-flags.html">Red Flags</a></li>
						<li><a href="interventions.html">Interventions</a></li>
						<li class="dropdown">
							<a href="#">Account <i class="fa fa-caret-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="profile.html">My Profile</a></li>
								<li><a href="#" class="auth-logout">Log out</a></li>
							</ul>
						</li>
					</ul>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
	<div>
		<div class="container">
			<div class="header-container">
				<div class="f-left">
					<span class="header">My Red Flags</span>
					<a href="create-red-flag.html" class="button small" style="margin-left:20px;"><i class="fa fa-plus"></i> Create a Red Flag</a>
				</div>
				<div class="f-right"></div>
				<div class="clearfix"></div>
			</div>
			<div>
				<ul class="tab f-left">
					<li><a href="#">Pending</a></li>
					<li><a href="#">Resolved</a></li>
					<li><a href="#">Under Investigation</a></li>
					<li><a href="#">Rejected</a></li>
					<li class="active"><a href="#">All</a></li>
				</ul>
				<div class="f-right">
					<!-- Showing 1 - 5 of 5 -->
					<div class="search-box">
						<input type="text" placeholder="Search title" name="q" class="text-field" />
						<button><i class="fa fa-search"></i></button>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="content">
				<div class="table-wrapper">
					<table id="incident-table">
						<thead>
							<th>#</th>
							<th>Title</th>
							<th>Created At</th>
							<th>Status</th>
							<th>Action</th>
						</thead>
						<tbody></tbody>
					</table>
				</div>
				<!-- <div class="pagination-wrapper">
					<ul class="pagination f-right">
						<li class="active"><a href="#">1</a></li>
						<li><a href="#">2</a></li>
						<li><a href="#">3</a></li>
						<li>...</li>
						<li><a href="#">4</a></li>
						<li><a href="#">5</a></li>
					</ul>
					<div class="clearfix"></div>
				</div> -->
			</div>	
		</div>
	</div>

	<div class="modal-container">
		<div class="modal medium" id="delete-modal">
			<div class="modal-body">Do you want to delete this incident?</div>
			<div class="modal-btn-area">
				<a href="#" class="modal-btn close">Close</a>
				<a href="#" class="modal-btn red yes">Yes</a>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</body>
</html>