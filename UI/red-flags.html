<!DOCTYPE html>
<html>
<head>
	<title>My Red Flags | iReporter</title>

	<link rel="stylesheet" type="text/css" href="assets/css/ireporter.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/navbar2.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/user.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/records.css" />

	<script src="assets/js/ireporter.js"></script>
	<script src="assets/js/api.js"></script>
	<script src="assets/js/app.js"></script>
	<script>
	let incidentTable = null;

	app.setAuthRequired(true);
	app.ready((http) => {
	  incidentTable = app.table('incident-table');
	  incidentTable.setRowView((data, serial) => {
	    const status = data.status.replace('-', ' ').toUpperCase();

	  	let row = `<tr>
	  	  <td>${serial}</td>
	  	  <td><a href="./view-red-flag.html?id=${data.id}">${data.title}</a></td>
	  	  <td>${data.createdon}</td>
	  	  <td><span class="record-status no-select ${data.status}">${status}</span></td>
	  	  <td>
	  	    <a href="./view-red-flag.html?id=${data.id}" class="action blue"><i class="fa fa-eye"></i> View</a>`;
	  	if (data.status == 'in-draft') {
	  	  row += `
	  	    <a href="./create-red-flag.html?action=edit&id=${data.id}" class="action blue"><i class="fa fa-pencil"></i> Edit</a>
	  	    <a href="#" class="action red"><i class="fa fa-trash"></i> Delete</a>`;
	  	}
	  	row += '</td></tr>';
	  	return row;
	  });

	  http.api('red-flags').get((data) => {
	  	incidentTable.setDataSet(data).draw();
	  }, (error) => {
        console.log(error);
	  });
	});
	app.start();
	</script>
</head>
<body>
	<div class="red-bg">
		<div class="container">
			<div id="navbar">
				<a href="dashboard.html" class="sitename">iReporter</a>
				<div class="navbar-menu">
					<ul>
						<li><a href="red-flags.html">Red Flags</a></li>
						<li><a href="interventions.html">Interventions</a></li>
						<li class="dropdown">
							<a href="#">Account <i class="fa fa-caret-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="profile.html">My Profile</a></li>
								<li><a href="index.html">Log out</a></li>
							</ul>
						</li>
					</ul>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
	<div>
		<div class="container">
			<div class="header-container">
				<div class="f-left">
					<span class="header">My Red Flags</span>
					<a href="create-red-flag.html" class="button small" style="margin-left:20px;"><i class="fa fa-plus"></i> Create a Red Flag</a>
				</div>
				<div class="f-right"></div>
				<div class="clearfix"></div>
			</div>
			<div>
				<ul class="tab f-left">
					<li><a href="#">Pending</a></li>
					<li><a href="#">Resolved</a></li>
					<li><a href="#">Under Investigation</a></li>
					<li><a href="#">Rejected</a></li>
					<li class="active"><a href="#">All</a></li>
				</ul>
				<div class="f-right">
					<!-- Showing 1 - 5 of 5 -->
					<div class="search-box">
						<input type="text" placeholder="Search title" name="q" class="text-field" />
						<button><i class="fa fa-search"></i></button>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="content">
				<div class="table-wrapper">
					<table id="incident-table">
						<thead>
							<th>#</th>
							<th>Title</th>
							<th>Created At</th>
							<th>Status</th>
							<th>Action</th>
						</thead>
						<tbody></tbody>
					</table>
				</div>
				<!-- <div class="pagination-wrapper">
					<ul class="pagination f-right">
						<li class="active"><a href="#">1</a></li>
						<li><a href="#">2</a></li>
						<li><a href="#">3</a></li>
						<li>...</li>
						<li><a href="#">4</a></li>
						<li><a href="#">5</a></li>
					</ul>
					<div class="clearfix"></div>
				</div> -->
			</div>	
		</div>
	</div>
</body>
</html>