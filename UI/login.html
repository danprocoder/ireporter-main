<!DOCTYPE html>
<html>
<head>
	<title>Log In | iReporter</title>

	<link rel="stylesheet" type="text/css" href="assets/css/ireporter.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/navbar1.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/a.css" />
</head>
<body>
	<div class="red-bg">
		<div id="navbar">
			<div class="navbar-container">
				<div class="navbar-inner">
					<a href="index.html" class="sitename">iReporter</a>
					<div class="navbar-menu">
						<ul>
							<li><a href="login.html">Log In</a></li>
							<li><a href="signup.html">Sign Up</a></li>
						</ul>
					</div>
					<button class="nav-toggle-responsive"><i class="fa fa-bars"></i></button>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>
	</div>
	<div>
		<form role="form" class="login" id="login-form" onsubmit="authUser(event)" method="post">
			<div class="header-container">
				<div class="header t-center">Log In</div>
			</div>
			<div class="field-section">
				<label>Your Email</label>
				<input type="text" name="email" class="text-field" />
				<div class="error email"></div>
			</div>
			<div class="field-section">
				<label>Your Password</label>
				<input type="password" name="password" class="text-field" />
				<div class="error password"></div>
			</div>
			<div class="field-section t-center button-section">
				<!-- <a href="dashboard.html" class="button">Log In</a> -->
				<input type="submit" class="button" value="Log In" />
			</div>
		</form>
	</div>

	<script src="assets/js/validator.js"></script>
	<script>
	function authUser(event) {
	  event.preventDefault();

	  var errors = document.querySelectorAll('#login-form .error');
	  for (let i = 0; i < errors.length; i++) {
	  	errors[i].innerHTML = '';
	  	errors[i].classList.remove('show');
	  }

      const validator = new FormValidator('login-form'),
      		rules = {
      			'email': ['required'],
      			'password': ['required']
      		};
      if (validator.validate(rules)) {
      	window.location = './dashboard.html';
   //    	let form = document.getElementById('login-form');
	  //   fetch('/api/v1/user/auth', {
		 //  method: 'POST',
		 //  headers: {
			//   'Content-Type': 'application/json'
		 //  },
		 //  body: JSON.stringify({
			// email: form['email'].value,
			// password: form['password'].value
		 //  })
	  //   }).then(res => 
		 //  res.json()).then((data) => {
		 //  console.log(data);
	  //   });
      } else {
      	const errors = validator.getErrors();
      	for (const name in errors) {
      	  const errMessage = document.querySelector('#login-form .error.' + name);
      	  errMessage.innerHTML = errors[name];
      	  errMessage.classList.add('show');
      	}
      }
	}
	</script>
</body>
</html>