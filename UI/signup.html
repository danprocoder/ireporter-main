<!DOCTYPE html>
<html>
<head>
	<title>Sign Up | iReporter</title>

	<link rel="stylesheet" type="text/css" href="assets/css/ireporter.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/navbar1.css" />
	<link rel="stylesheet" type="text/css" href="assets/css/a.css" />
</head>
<body>
	<div class="red-bg">
		<div id="navbar">
			<div class="navbar-container">
				<div class="navbar-inner">
					<a href="index.html" class="sitename">iReporter</a>
					<div class="navbar-menu">
						<ul>
							<li><a href="login.html">Log In</a></li>
							<li><a href="signup.html">Sign Up</a></li>
						</ul>
					</div>
					<button class="nav-toggle-responsive"><i class="fa fa-bars"></i></button>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>
	</div>
	<div>
		<form role="form" class="signup" id="signup-form" onsubmit="submitForm(event)" method="post">
			<div class="header-container t-center">
				<div class="header">Sign Up</div>
				<small class="info">All fields are required</small>
			</div>
			<div class="padding">
				<div class="field-section grid-container">
					<div class="grid-50">
						<label>Your Firstname</label>
						<input type="text" name="firstname" class="text-field" />
						<div class="error firstname"></div>
					</div>
					<div class="grid-50">
						<label>Your Lastname</label>
						<input type="text" name="lastname" class="text-field" />
						<div class="error lastname"></div>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="field-section grid-container">
					<div class="grid-50">
						<label>Your Email</label>
						<input type="text" name="email" class="text-field" />
						<div class="error email"></div>
					</div>
					<div class="grid-50">
						<label>Your Mobile Number</label>
						<input type="text" name="mobile" class="text-field" />
						<div class="error mobile"></div>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="field-section grid-container">
					<div class="grid-50">
						<label>Your Password</label>
						<input type="password" name="password" class="text-field" />
						<div class="error password"></div>
					</div>
					<div class="grid-50">
						<label>Re-enter Password</label>
						<input type="password" name="password2" class="text-field" />
						<div class="error password2"></div>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="field-section t-center button-section">
					<input type="submit" class="button" value="Create an Account" />
				</div>
			</div>
		</form>
	</div>

	<script src="assets/js/validator.js"></script>
	<script>
	function submitForm(event) {
		event.preventDefault();

	    var errors = document.querySelectorAll('#signup-form .error');
		for (let i = 0; i < errors.length; i++) {
		  	errors[i].innerHTML = '';
		  	errors[i].classList.remove('show');
		}

		const validator = new FormValidator('signup-form'),
		  rules = {
		  	'firstname': ['required'],
		  	'lastname': ['required'],
		  	'email': ['required', 'valid_email'],
		  	'mobile': ['required', 'valid_mobile'],
		  	'password': ['required', 'min_length[8]'],
		  	'password2': ['required']
		  };
		if (validator.validate(rules)) {
      	    window.location = './dashboard.html';
			// var form = document.getElementById('signup-form').elements;

			// fetch('/api/v1/user/new', {
			// 	method: 'POST',
			// 	headers: {
			// 		'Content-Type': 'application/json'
			// 	},
			// 	body: JSON.stringify({
			// 		firstname: form['firstname'].value,
			// 		lastname: form['lastname'].value,
			// 		email: form['email'].value,
			// 		mobile: form['mobile'].value,
			// 		password: form['password'].value,
			// 		password2: form['password2'].value
			// 	})
			// }).then(res => {
			// 	return res.json();
			// }).then(function(data) {
			// 	console.log(data);
			// });
		} else {
			const errors = validator.getErrors();
	      	for (const name in errors) {
	      	  const errMessage = document.querySelector('#signup-form .error.' + name);
	      	  errMessage.innerHTML = errors[name];
	      	  errMessage.classList.add('show');
	      	}
		}
	}
	</script>
</body>
</html>